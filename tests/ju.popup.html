<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="/static/css/normalize.css" type="text/css" />
    <link rel="stylesheet" href="/static/css/ju/ju.popup.css" type="text/css" />
    <script src="/static/js/jquery-1.11.1.js" type="text/javascript"></script>
    <script src="/static/js/ju/ju.js" type="text/javascript"></script>
    <script src="/static/js/ju/ju.popup.js" type="text/javascript"></script>
    <script src="/static/js/ju/ju.popup.util.js" type="text/javascript"></script>
    <script src="/static/js/ju/ju.console.js" type="text/javascript"></script>
    <style type="text/css">
    body {
        font:     14px/normal Tahoma;
        padding:  20px;
        color:    #333;
    }
    #output a {
        color:    #0088cc;
        text-decoration: none;
    }
    #output a:hover {
        color:    #cc4444;
    }
    #output p {
        margin:   0px 0px 12px 0px;
    }
    </style>
</head>
<body>
<div id="output"></div>

<script type="text/javascript">
(function(to, list) {
    $.each(list, function(i, item) {
        $('<p />')
        .html(
            $('<a href="javascript:;" />')
            .html(item.title)
            .click(item.test)
        )
        .appendTo(to);
    });
})('#output', [
    {
        title: "Очередь сообщений",
        test:  function() {
            var titles = [
                { text: "Ошибка",    type: "error" },
                { text: "Сообщение", type: "notice" },
                { text: "Сообщение", type: "" }
            ];
            ju.forEach(titles, function(i, t) {
                ju.Message(t, function() {
                    console.log('closed ' + i);
                });
            });
        }
    },
    {
        title: "Простое подтверждение",
        test:  function() {
            ju.Confirm({
                title: "Заголовок",
                text:  "Сообщение",
                buttons: ["Сообщение" , "Сообщение и Закрыть", "Закрыть"]
            },
            function() {
                ju.Message("Привет всем");
                return false;
            },
            function() {
                ju.Message("Привет всем");
            })
            .prop('onClose', function() {
                console.log('confirm closed');
            })
            .open();
        }
    },
    {
        title: "Очередь подтверждений",
        test:  function() {
            var qq = new ju.Popup.Queue(function() {
                console.log('queue closed');
            }), t;
            
            qq.push(ju.Confirm({
                title:   "Заголовок",
                text:    "Сообщение 1",
                onOpen:  function(){  console.log('opened 1')  },
                onClose: function(){  console.log('closed 1')  }
            }));

            qq.push(ju.Confirm({
                title:   "Заголовок",
                text:    "Сообщение 2",
                onOpen:  function(){  console.log('opened 2')  },
                onClose: function(){  console.log('closed 2')  }
            }));

            qq.push(ju.Confirm({
                title:   "Заголовок",
                text:    "Сообщение 3",
                onOpen:  function(){  console.log('opened 3')  },
                onClose: function(){  console.log('closed 3')  }
            }));
            
            qq.open();
        }
    },
    {
        title: "Очередь подтверждений (call open)",
        test:  function() {
            var qq = new ju.Popup.Queue(function() {
                console.log('queue closed');
            }), t;
            
            qq.push(ju.Confirm({
                title:   "Заголовок",
                text:    "Сообщение 1",
                onOpen:  function(){  console.log('opened 1')  },
                onClose: function(){  console.log('closed 1')  }
            }));

            qq.push(t = ju.Confirm({
                title:   "Заголовок",
                text:    "Сообщение 2",
                onOpen:  function(){  console.log('opened 2')  },
                onClose: function(){  console.log('closed 2')  }
            }));
            t.open();
            
            qq.push(ju.Confirm({
                title:   "Заголовок",
                text:    "Сообщение 3",
                onOpen:  function(){  console.log('opened 3')  },
                onClose: function(){  console.log('closed 3')  }
            }));
            
            qq.open();
        }
    },
    {
        title: "Очередь подтверждений (call remove)",
        test:  function() {
            var qq = new ju.Popup.Queue(function() {
                console.log('queue closed');
            }), t;
            
            qq.push(ju.Confirm({
                title:   "Заголовок",
                text:    "Сообщение 1",
                onOpen:  function(){  console.log('opened 1')  },
                onClose: function(){  console.log('closed 1')  }
            }));

            qq.push(t = ju.Confirm({
                title:   "Заголовок",
                text:    "Сообщение 2",
                onOpen:  function(){  console.log('opened 2')  },
                onClose: function(){  console.log('closed 2')  }
            }));
            t.remove();

            qq.push(ju.Confirm({
                title:   "Заголовок",
                text:    "Сообщение 3",
                onOpen:  function(){  console.log('opened 3')  },
                onClose: function(){  console.log('closed 3')  }
            }));
            
            qq.open();
        }
    },
    {
        title: "Очередь подтверждений (done queue)",
        test:  function() {
            var qq = new ju.Popup.Queue(function(a) {
                console.log('queue closed ' + a);
            }), t;
            
            qq.push(ju.Confirm({
                title:   "Заголовок",
                text:    "Сообщение 1",
                onOpen:  function(){  console.log('opened 1')  },
                onClose: function(){  console.log('closed 1')  },
                buttons: ["Закрыть", "Далее"]
            }, function() {
                qq.done('ololo');
            }));

            qq.push(t = ju.Confirm({
                title:   "Заголовок",
                text:    "Сообщение 2",
                onOpen:  function(){  console.log('opened 2')  },
                onClose: function(){  console.log('closed 2')  }
            }));

            qq.push(ju.Confirm({
                title:   "Заголовок",
                text:    "Сообщение 3",
                onOpen:  function(){  console.log('opened 3')  },
                onClose: function(){  console.log('closed 3')  }
            }));
            
            qq.open();
        }
    },
    
    
    {
        title: "Простой спиннер (2 сек)",
        test:  function() {
            var spinner = ju.Spinner().open();
            setTimeout(function() {  spinner.close();  }, 2000);
        }
    },

    {
        title: "Очередь спиннеров",
        test:  function() {
            var titles = [
                          { text: "Идет сохранение", type: "error"  , start: 0    , stop: 6000 },
                          { text: "Подождите еще",   type: "notice" , start: 1000 , stop: 5000 },
                          { text: "Ну подожди жеж",  type: ""       , start: 2000 , stop: 4000 }
                ];
            ju.forEach(titles, function(i, t) {
                var spinner = ju.Spinner(t);
                
                setTimeout(function() {  spinner.open();   }, t.start);
                setTimeout(function() {  spinner.close();  }, t.stop );

            });
        }
    },
    
    {
        title: "",
        test:  function() {
            
        }
    }
]);

</script>

</body>
</html>
